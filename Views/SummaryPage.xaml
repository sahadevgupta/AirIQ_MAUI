<?xml version="1.0" encoding="utf-8" ?>
<views:BasePage
    x:Class="AirIQ.Views.SummaryPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:helpers="clr-namespace:AirIQ.Extensions"
    xmlns:views="clr-namespace:AirIQ.Views"
    xmlns:vm="clr-namespace:AirIQ.ViewModels">

    <views:BasePage.PageContent>
        <ScrollView>
            <Grid RowDefinitions="Auto,Auto,Auto,*" RowSpacing="0">

                <!--  PRICE CARD  -->
                <Frame
                    Margin="20,20,20,0"
                    Padding="20"
                    BackgroundColor="#FFFFFF"
                    CornerRadius="16"
                    HasShadow="False">
                    <VerticalStackLayout>
                        <Label
                            FontAttributes="Bold"
                            FontSize="32"
                            Text="{Binding TotalPrice}"
                            TextColor="#000" />

                        <Label
                            FontSize="15"
                            Text="{Binding SelectedAirline.DepartureDate}"
                            TextColor="#555" />

                        <BoxView
                            Margin="0,15,0,0"
                            BackgroundColor="#E0E0E0"
                            HeightRequest="1" />

                        <!--  ONLINE TAG + AIRLINE LOGO  -->
                        <Grid
                            Margin="0,20,0,0"
                            Padding="15"
                            BackgroundColor="#F7F7F7"
                            ColumnDefinitions="Auto,*"
                            HeightRequest="120"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="Center">

                            <!--  ONLINE LABEL  -->
                            <Frame
                                Padding="10,4"
                                BackgroundColor="#2E6FB6"
                                CornerRadius="10"
                                VerticalOptions="Start">
                                <Label
                                    FontAttributes="Bold"
                                    FontSize="14"
                                    Text="ONLINE"
                                    TextColor="White" />
                            </Frame>

                            <!--  LOGO  -->
                            <Image
                                Grid.Column="1"
                                Aspect="AspectFit"
                                HeightRequest="60"
                                HorizontalOptions="Center"
                                Source="https://logo.clearbit.com/spicejet.com"
                                VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>


                <!--  FLIGHT DETAILS CARD  -->
                <Frame
                    Grid.Row="1"
                    Margin="20,20,20,0"
                    Padding="20"
                    BackgroundColor="#FFF"
                    CornerRadius="18"
                    HasShadow="False">

                    <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto,Auto">

                        <!--  Airline Logo & Route  -->
                        <HorizontalStackLayout Grid.Row="0" Grid.ColumnSpan="2">
                            <Image
                                Aspect="AspectFill"
                                HeightRequest="50"
                                Source="{Binding SelectedAirline.ImageUrl}"
                                WidthRequest="50" />

                            <VerticalStackLayout Margin="10,0,0,0">
                                <Label
                                    FontAttributes="Bold"
                                    FontSize="16"
                                    Text="{Binding SelectedAirline.AirlineName}"
                                    TextColor="#7A7A7A" />

                                <Label
                                    FontAttributes="Bold"
                                    FontSize="16"
                                    Text="{Binding SelectedAirline.FlightRoute}"
                                    TextColor="Black" />
                            </VerticalStackLayout>

                            <Label
                                Grid.Column="1"
                                FontAttributes="Bold"
                                FontSize="18"
                                HorizontalOptions="End"
                                Text="{Binding TotalPrice}"
                                VerticalOptions="Center" />
                        </HorizontalStackLayout>

                        <BoxView
                            Grid.Row="1"
                            Grid.ColumnSpan="2"
                            Margin="0,10"
                            BackgroundColor="#E0E0E0"
                            HeightRequest="1" />

                        <!--  Subtotal + Discount  -->
                        <Label
                            Grid.Row="2"
                            FontAttributes="Bold"
                            Text="Subtotal"
                            TextColor="#444" />

                        <Label
                            Grid.Row="2"
                            Grid.Column="1"
                            FontAttributes="Bold"
                            FontSize="18"
                            HorizontalOptions="End"
                            Text="$185.65" />

                        <Label
                            Grid.Row="3"
                            FontAttributes="Bold"
                            Text="Discount"
                            TextColor="#444" />

                        <Label
                            Grid.Row="3"
                            Grid.Column="1"
                            FontAttributes="Bold"
                            FontSize="18"
                            HorizontalOptions="End"
                            Text="- $3.71"
                            TextColor="#2E6FB6" />
                    </Grid>
                </Frame>


                <!--  TRAVELLERS LIST  -->
                <Frame
                    Grid.Row="2"
                    Margin="20,20,20,0"
                    Padding="20"
                    BackgroundColor="#FFF"
                    CornerRadius="18"
                    HasShadow="False">

                    <VerticalStackLayout>
                        <Label
                            CharacterSpacing="2"
                            FontAttributes="Bold"
                            FontSize="14"
                            Text="TRAVELLERS"
                            TextColor="Silver" />

                        <CollectionView Margin="0,10,0,10" ItemsSource="{Binding Passengers}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <HorizontalStackLayout Padding="0,5" Spacing="10">
                                        <Image HeightRequest="32">
                                            <Image.Source>
                                                <FontImageSource
                                                    FontFamily="MyFont"
                                                    Glyph="{x:Static helpers:FontAwesomeIcons.UserCircle}"
                                                    Color="#2E6FB6" />
                                            </Image.Source>
                                        </Image>

                                        <Label FontSize="16" TextColor="#000">
                                            <Label.Text>
                                                <MultiBinding StringFormat="{}{0} {1} {2}">
                                                    <Binding Path="Title" />
                                                    <Binding Path="FirstName" />
                                                    <Binding Path="LastName" />
                                                </MultiBinding>
                                            </Label.Text>
                                        </Label>
                                    </HorizontalStackLayout>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>

                        <BoxView BackgroundColor="#E0E0E0" HeightRequest="1" />

                        <!--  Payment Row  -->
                        <Grid Margin="0,10,0,0" ColumnDefinitions="Auto,*">
                            <Label
                                FontAttributes="Bold"
                                FontSize="16"
                                Text="Sept 26"
                                TextColor="Black" />

                            <StackLayout Grid.Column="1">
                                <Label
                                    FontSize="13"
                                    LineBreakMode="WordWrap"
                                    Text="Confirm received commodity, $181.94 is included in this month bills."
                                    TextColor="#555" />
                            </StackLayout>
                        </Grid>

                        <HorizontalStackLayout Margin="0,10,0,0" Spacing="10">
                            <Image
                                HeightRequest="26"
                                Source="LogoPaypal"
                                VerticalOptions="Center" />
                            <Label
                                FontAttributes="Bold"
                                FontSize="15"
                                Text="lyh4852@icloud.com"
                                VerticalOptions="Center" />
                        </HorizontalStackLayout>

                    </VerticalStackLayout>
                </Frame>


                <!--  BUTTONS  -->
                <Grid
                    Grid.Row="3"
                    Margin="20,10,20,20"
                    ColumnDefinitions="*,*">

                    <Button
                        BackgroundColor="#E4E4E4"
                        CornerRadius="12"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        Text="Cancel"
                        TextColor="Black" />

                    <Button
                        Grid.Column="1"
                        BackgroundColor="#000"
                        Command="{Binding PayNowCommand}"
                        CornerRadius="12"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        Text="Pay now"
                        TextColor="White" />
                </Grid>

            </Grid>
        </ScrollView>

    </views:BasePage.PageContent>
</views:BasePage>
